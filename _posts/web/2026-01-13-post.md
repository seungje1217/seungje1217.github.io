---
layout: single
title: "📘 Express 기초"
toc: true
toc_sticky: true
toc_label: "목차"
categories: web
excerpt: "Express에 대해.."
tag: [web]
---
### 프레임워크 vs 라이브러리
프레임워크와 라이브러리는 모두 남의 코드를 가져다 쓰는 것이지만, 제어권의 위치가 다르다.
- 프레임워크
    - 프레임워크가 호출
- 라이브러리
    - 내가 호출
<br/>   

이런식으로 라이브러리는 내가 필요할 때 호출하고, 프레임워크는 내 코드를 대신 호출하는 형식이다.
<br/>  
라이브러리는 공구세트, 프레임워크는 조립식 가구 키트라고 생각하면 된다.

---

### 프레임워크의 장점
프레임워크의 인증, 라우팅, 에러 처리 등 이미 검증된 코드를 가져다 쓰면 개발
속도가 빨라지고 버그도 줄어든다.

또한 프레임워크는 정해진 구조를 따르기에 팀원들이 코드를 이해하기 쉽고, 유지보수가 편하다.

---

### Express
Express는 Node.js위에서 동작하는 웹 프레임워크다.

Node.js만으로도 서버는 만들 수 있지만 그렇게되면 라우팅, 미들웨어등을 직접 구현하고 그에따른 개발 시간도 늘어나고 유지보수도 힘들어지며 여러가지로 좋지않다.

하지만 Express를 사용하면 라우팅, 미들웨어, 요청, 응답 처리를 간결하게 작성할 수 있게 된다. 그에따른 개발 속도와 유지보수 측에서도 이점이 있다.

---

### 요청데이터
클라이언트가 서버에게 데이터를 보내는 방법은 크게 3가지가 존재한다.

이 3가지의 차이는 **데이터가 어디에 붙어 있느냐**의 차이라고 생각하면 된다.

> Query String

URL 뒤에 **?key=value** 형태로 붙는 데이터이다.
주로 검색어, 필터, 정렬 조건처럼 결과를 좁히는 용도로 사용한다.
```
/search?q=apple  // apple이라는 키워드로 검색해줘 

// 서버에서 받는 방법 (Express)
req.query.q
```
---
<br/>

>  URL Parameter

URL Parameter는 경로 안에 포함된 값이다.
보통 :id 처럼 하나의 리소스 (특정 대상)을 지정(조회)하거나 특정 단어 수정이나 삭제 등에 사용한다.
```
/tweets/3   // 3번 트윗 가져와줘

// 서버에서 받는 방법 (Express)
req.params.id  // param뒤에 s 꼭 붙여야함!
```
---
<br/>

> Body

Body는 요청 본문에 담기는 데이터로, 주로 JSON 형태로 전달된다.

여기서 **JSON**이란 JavaScript Object Notation의 약자이며, 데이터를 쉽게 교환하고 저장하기 위한 텍스트 기반의 데이터 교환 표준이다.

주로 회원가입, 로그인, 글 작성, 데이터 수정 등의 생성이나 수정 데이터에 사용된다.
```
{
  "name": "node"   
  // name 값을 node로 저장
}

// 서버에서 받는 방법 (Express)
req.body.name
```

---

### 응답 메서드
Express에서 클라이언트에게 응답을 보내는 여러가지 방법들이다.

- res.send()
    - 문자열/HTML 전송 
    - res.send('Hi')
- res.json()
    - JSON(API) 전송 
    - res.json({data:twt})
- res.sendFile()
    - 파일 전송 
    - res.sendFile('file.pdf')
- res.redirect()
    - 다른 URL로 이동 지시
    - res.redirect('/login')
        - 로그인 안한 사용자 로그인 페이지로 보낼 때 등에 사용
- res.status()
    - 요청 처리 결과를 HTTP 상태 코드로 명확하게 전달할 때 사용
    - res.status(404).json({ message: 'Not Found' })
        - 요청한 데이터가 없었다 
        - 서버가 공식적 사실을 알려주는 것

---

### HTTP 상태 코드
위의 res.status()에서 나온 HTTP 상태 코드에 대해 적어본다.

HTTP 상태 코드는 3가지 숫자로, 첫 번째 숫자가 의미를 나타낸다.

**2는 성공, 4는 클라이언트 오류(요청잘못), 5는 서버 오류다.**

- 자주 쓰는 상태코드
    - 200 : 성공
    - 201 : 생성 성공
    - 400 : 잘못된 요청
    - 401 : 인증 필요
    - 403 : 권한 없음
    - 404 : 데이터 없음
    - 500 : 서버 오류